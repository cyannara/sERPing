<!DOCTYPE html>
<html layout:decorate="~{layouts/layout}" lang="en"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns="http://www.w3.org/1999/xhtml" xmlns:sec="">

<head>
<meta charset="UTF-8">
<!-- timePicker -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.css" />
<script
	src="https://uicdn.toast.com/tui.time-picker/latest/tui-time-picker.js"></script>

<!-- datePicker -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
<script
	src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>


<!-- paging -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
<script
	src="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.js"></script>

<!-- toast grid -->
<link rel="stylesheet"
	href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>

<!-- ì—‘ì…€ -->
<script lang="javascript"
	src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
<!-- bootsStrap -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
	crossorigin="anonymous"></script>

<!-- custom CSS -->
<link rel="stylesheet" th:href="@{/css/hr/style.css}">

<title>ì‚¬ì› ê´€ë¦¬</title>
</head>

<body layout:fragment="content">

	<div class="container">
		<div class="d-flex justify-content-start p-0 mt-2">
			<h2>ì‚¬ì› ê´€ë¦¬</h2>
		</div>
		<div class="d-flex flex-column mb-1">

			<!-- ì‚¬ì› ê²€ìƒ‰ ì˜ì—­ -->
			<div class="search-box bg-light p-3 rounded shadow-sm">
				<!-- ê²€ìƒ‰ ê¸°ì¤€ -->
				<div class="mb-2">
					<label class="fw-bold d-block">ê²€ìƒ‰ ê¸°ì¤€</label>
					<div class="d-flex">
						<select class="form-select me-2" style="width: 120px;"
							id="searchCategory">
							<option value="ì „ì²´">ì „ì²´</option>
							<option value="ì´ë¦„">ì´ë¦„</option>
							<option value="ë¶€ì„œ">ë¶€ì„œ</option>
						</select> <input type="text" class="form-control" style="width: 250px;"
							placeholder="ê²€ìƒ‰ì–´ ì…ë ¥">
					</div>
				</div>

				<!-- ë¶€ì„œ -->
				<div class="mb-2">
					<label class="fw-bold d-block">ë¶€ì„œ</label> <select
						class="form-select" style="width: 100%;" id="searchDepartment">
						<option value="">ë¶€ì„œ ì„ íƒ</option>
						<option value="HR">ì¸ì‚¬íŒ€</option>
						<option value="IT">ITíŒ€</option>
					</select>
				</div>

				<!-- ì§ê¸‰ -->
				<div class="mb-2">
					<label class="fw-bold d-block">ì§ê¸‰</label> <select
						class="form-select" style="width: 100%;" id="searchPosition">
						<option value="">ì§ê¸‰ ì„ íƒ</option>
						<option value="P001">ì‚¬ì›</option>
						<option value="P002">ëŒ€ë¦¬</option>
						<option value="P003">ê³¼ì¥</option>
					</select>
				</div>

				<!-- ì¬ì§ ìƒíƒœ -->
				<div class="mb-2">
					<label class="fw-bold d-block">ì¬ì§ ìƒíƒœ</label>
					<div class="btn-group w-100" role="group">
						<input type="radio" class="btn-check" name="searchStatus"
							id="statusAll" checked> <label
							class="btn btn-outline-primary" for="statusAll">ì „ì²´</label> <input
							type="radio" class="btn-check" name="searchStatus"
							id="statusActive"> <label class="btn btn-outline-primary"
							for="statusActive">ì¬ì§</label> <input type="radio"
							class="btn-check" name="searchStatus" id="statusLeave"> <label
							class="btn btn-outline-primary" for="statusLeave">íœ´ì§</label> <input
							type="radio" class="btn-check" name="searchStatus"
							id="statusRetired"> <label
							class="btn btn-outline-primary" for="statusRetired">í‡´ì§</label>
					</div>
				</div>

				<!-- ê·¼ë¬´ ìœ í˜• -->
				<div class="mb-3">
					<label class="fw-bold d-block">ê·¼ë¬´ ìœ í˜•</label>
					<div class="btn-group w-100" role="group">
						<input type="radio" class="btn-check" name="employmentType"
							id="typeAll" checked> <label
							class="btn btn-outline-primary" for="typeAll">ì „ì²´</label> <input
							type="radio" class="btn-check" name="employmentType"
							id="typeRegular"> <label class="btn btn-outline-primary"
							for="typeRegular">ì •ê·œì§</label> <input type="radio"
							class="btn-check" name="employmentType" id="typeContract">
						<label class="btn btn-outline-primary" for="typeContract">ê³„ì•½ì§</label>
					</div>
				</div>

				<!-- ì¡°íšŒ ë° ì´ˆê¸°í™” ë²„íŠ¼ (ì¤‘ì•™ ì •ë ¬) -->
				<div class="w-100 text-center mt-3">
					<button class="btn btn-primary me-2" onclick="searchEmployees()">ğŸ”
						ì¡°íšŒ</button>
					<button class="btn btn-outline-success" onclick="resetFilters()">ğŸ”„
						ì´ˆê¸°í™”</button>
				</div>
			</div>
			<!-- ì‚¬ì› ê²€ìƒ‰ ì˜ì—­ ë -->

			<!-- í† ìŠ¤íŠ¸ ê·¸ë¦¬ë“œ ì˜ì—­ -->
			<div id="table-container">
				<div id="grid"></div>
				<div id="pagination" class="tui-pagination"></div>
			</div>
			<!-- í† ìŠ¤íŠ¸ ê·¸ë¦¬ë“œ ì˜ì—­ ë -->

			<!-- ë²„íŠ¼ ì˜ì—­ -->
			<div class="pt-2">
				<button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#employeeRegisterModal" onclick="openEmployeeForm()">ì‚¬ì›
					ë“±ë¡</button>
			<!-- âœ… ëª¨ë‹¬ì„ ë‹¤ë¥¸ HTMLì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸° -->
			<div th:replace="~{hr/employee_register_modal :: employeeRegisterModal}"></div>

				<button class="btn btn-danger" onclick="deleteEmployee()">ì‚­ì œ</button>
			</div>
		</div>
		


		<script th:inline="javascript">
			document.addEventListener("DOMContentLoaded", function() {
			});
			//ê·¸ë¦¬ë“œ ì„ ì–¸
			var gridData = [[${employees}]];
			var Grid = tui.Grid;
			const dataSource = {
				api : {
					readData : {
						url : '/api/hr/employees',
						method : 'GET'
					},
				//createData: { url: '/api/createData', method: 'POST' },
				//updateData: { url: '/api/updateData', method: 'PUT' },
				//modifyData: { url: 'http://localhost:81/api/board/modifyData', method: 'PUT' },
				//deleteData: { url: '/api/deleteData', method: 'DELETE' },
				},
				contentType : 'application/json',
			};

			Grid.applyTheme('stripe');
			//ê·¸ë¦¬ë“œ ìƒì„±
			const grid = new Grid({
				el : document.getElementById('grid'), // ì»¨í…Œì´ë„ˆ ì—˜ë¦¬ë¨¼íŠ¸
				width: "100%", // ê·¸ë¦¬ë“œ ê°€ë¡œ í¬ê¸°ë¥¼ ìë™ ì¡°ì •
				autoWidth: true,  // ì»¬ëŸ¼ í¬ê¸° ìë™ ì¡°ì •
				pageOptions : {
					useClient : false, //í˜ì´ì§€ ë„¤ì´ì…˜ í• êº¼ë©´ false // ìë™ìœ¼ë¡œ í•˜ê²Œí• ê»´ë©´ true
					perPage : 5, //í•œí˜ì´ì§€ì— ëª‡ê°œ ë³´ì—¬ì¤„ì§€
				},
				
                rowHeaders: [{
                    type: 'rowNum',
                    header: "ìˆœë²ˆ",
                    width: 50,
                }],

				//ì¹¼ëŸ¼ ì •í•˜ê¸°
				columns : [ {
					header : "ì‚¬ì›ID",
					name : "employeeId",
					align: "center",
					width : 100,
					
				}, {
					header : "ì‚¬ì›ëª…",
					name : "employeeName",
					align: "center",
					sortable: true,
					width : 150,
				}, {
					header : "ë¶€ì„œ",
					name : "departmentName",
					align: "center",
					sortable: true,
					width : 100,
				}, {
					header : "ì§ê¸‰",
					name : "position",
					align: "center",
					sortable: true,
					width : 100,
					formatter: function({value}) {
                        const positionMap = { "PO001": "ì‚¬ì›", "PO002": "ëŒ€ë¦¬", "PO003": "ê³¼ì¥" };
                        return positionMap[value] || value;
                    }
					
				}, {
					header : "ì¬ì§ ìƒíƒœ",
					name : "status",
					align: "center",
					sortable: true,
					width : 100,
					formatter: function({value}) {
                        const statusMap = { "ST001": "ì¬ì§", "ST002": "íœ´ì§", "ST003": "í‡´ì§" };
                        return statusMap[value] || value;
                    }
				}, {
					header : "ê·¼ë¬´ ìœ í˜•",
					name : "employmentType",
					align: "center",
					sortable: true,
					width : 100,
					formatter: function({value}) {
                        const employmentMap = { "ET001": "ì •ê·œì§", "ET002": "ê³„ì•½ì§" };
                        return employmentMap[value] || value;
                    }
				}, {
					header : "ì…ì‚¬ì¼",
					name : "hireDate",
					align: "center",
					sortable: true,
					width : 150,
					formatter: function({value}) {
                        return value ? value.split('T')[0] : '';
                    }
				}, {
					header : "ì—°ë½ì²˜",
					align: "center",
					name : "phone",
					sortable: true,
					width : 150
				}, {
					header : "ì´ë©”ì¼",
					name : "email",
					align: "center",
					sortable: true,
					width : 200
				} ],

				//ì´ˆê¸° ë°ì´í„° ë­˜ë¡œ í• ì§€
				data : gridData,

				rowHeaders : [ 'checkbox' ],

			});
			
			
			
		</script>
	</div>
</body>
</html>