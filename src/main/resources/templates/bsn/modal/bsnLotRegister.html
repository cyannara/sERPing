<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
 <link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css">
    <script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
</head>
<body>
	<div id="registerGrid"></div>
	
	<script>
        let registerGrid;


        document.addEventListener("DOMContentLoaded", function () {
            registerGrid = new tui.Grid({
                el: document.getElementById('registerGrid'),
                columns: [
                    { header: 'LOTë²ˆí˜¸', name: 'goodsLotNum', },
                    { header: 'ì¶œê³ ê°€ëŠ¥ìˆ˜ëŸ‰', name: 'warehousingRemainingQuantity',  },
                    { header: 'ìœ í†µê¸°í•œ', name: 'goodsConsumptionDate', formatter: ({ value }) => formatDate(value), },
                    { header: 'ìˆ˜ëŸ‰', name: 'deliveryQnt', editor: 'text',  }
                ],
                data: LotListDataSource,
                rowHeaders: ['rowNum'],
                pageOptions: {
                    useClient: false,
                    perPage: 50
                }
            });
        });

        // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ë°ì´í„° ì—…ë°ì´íŠ¸
        document.getElementById('registerModal').addEventListener('shown.bs.modal', function () {
            if (registerGrid) {
            	registerGrid.reloadData();
                registerGrid.refreshLayout();
                console.log(selectedRow)
                
            }
        });
        
     // ğŸ“Œ REST APIì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
     const LotListDataSource = {
		api: {
			readData: { url: 'http://localhost:81/bsn/rest/goods/lot', method: 'GET', initParams: { page: 1 }},
			//?optionCode=${selectedRow.optionCode}&deliveryDetailId=${selectedRow.deliveryDetailId}
		},
		contentType: 'application/json'
	 };
     
     function formatDate(dateString) {
    	    if (!dateString) return ''; // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
    	    const date = new Date(dateString);
    	    if (isNaN(date)) return dateString; // ë‚ ì§œ ë³€í™˜ì´ ì‹¤íŒ¨í•˜ë©´ ì›ë³¸ ìœ ì§€

    	    return date.toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' }) // "2025ë…„ 2ì›” 17ì¼"
    	        
    	}
    </script>
</body>
</html>